<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laboratorium - RUMAH SAKIT JAYA SEHAT</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <style>
        .specimen-box {
            background: #f0f7ff;
            border: 2px solid #0066cc;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .specimen-title {
            font-weight: bold;
            color: #0066cc;
            margin-bottom: 10px;
            font-size: 1.05em;
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <aside class="admin-sidebar"></aside>

        <!-- Main Content -->
        <main class="admin-main">
            <div class="form-header">
                <h1><i class="fas fa-flask"></i> Laboratorium</h1>
                <p>Formulir Permintaan Pemeriksaan Laboratorium</p>
            </div>

            <form id="lab-form" onsubmit="handleLaboratorium(event)" class="patient-form" novalidate>
                
                <!-- Bagian: Data Pasien -->
                <div class="form-section">
                    <h3>
                        <i class="fas fa-user"></i> Data Pasien
                    </h3>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="no-rm-lab">
                                <span class="required">*</span> No RM
                            </label>
                            <input type="text" id="no-rm-lab" name="no-rm-lab" placeholder="No Rekam Medis" required>
                        </div>
                        <div class="form-group">
                            <label for="nama-pasien-lab">
                                <span class="required">*</span> Nama Pasien
                            </label>
                            <input type="text" id="nama-pasien-lab" name="nama-pasien-lab" placeholder="Nama pasien" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="umur-lab">
                                <span class="required">*</span> Umur
                            </label>
                            <input type="number" id="umur-lab" name="umur-lab" placeholder="Umur" required>
                        </div>
                        <div class="form-group">
                            <label for="jenis-kelamin-lab">
                                <span class="required">*</span> Jenis Kelamin
                            </label>
                            <select id="jenis-kelamin-lab" name="jenis-kelamin-lab" required>
                                <option value="">Pilih Jenis Kelamin</option>
                                <option value="laki-laki">Laki-laki</option>
                                <option value="perempuan">Perempuan</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Bagian: Waktu Permintaan -->
                <div class="form-section">
                    <h3>
                        <i class="fas fa-clock"></i> Waktu Permintaan
                    </h3>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="tanggal-lab">
                                <span class="required">*</span> Tanggal Permintaan
                            </label>
                            <input type="date" id="tanggal-lab" name="tanggal-lab" required>
                        </div>
                        <div class="form-group">
                            <label for="urgency-lab">
                                <span class="required">*</span> Status Puasa
                            </label>
                            <select id="urgency-lab" name="urgency-lab" required>
                                <option value="">Pilih Status Puasa</option>
                                <option value="puasa">Puasa</option>
                                <option value="tidak-puasa">Tidak Puasa</option>
                                <option value="tidak-tahu">Tidak Tahu</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Bagian: Data Spesimen -->
                <div class="form-section">
                    <h3>
                        <i class="fas fa-vial"></i> Informasi Spesimen
                    </h3>
                    
                    <div class="specimen-box">
                        <div class="specimen-title">Tipe Spesimen</div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="jenis-lab">Jenis Spesimen <span class="required">*</span></label>
                                <select id="jenis-lab" name="jenis-lab" onchange="updateSpecimenInfo()" required>
                                    <option value="">-- Pilih Jenis Spesimen --</option>
                                    <option value="darah-vena">Darah Vena (Venous Blood)</option>
                                    <option value="darah-kapiler">Darah Kapiler (Fingerstick)</option>
                                    <option value="urin">Urin (Urine)</option>
                                    <option value="feces">Feses (Stool)</option>
                                    <option value="sputum">Sputum (Dahak)</option>
                                    <option value="cairan-tubuh">Cairan Tubuh Lainnya</option>
                                    <option value="jaringan">Jaringan (Tissue)</option>
                                    <option value="biopsi">Biopsi</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="indikasi-lab">Indikasi <span class="required">*</span></label>
                                <input type="text" id="indikasi-lab" name="indikasi-lab" placeholder="Indikasi pemeriksaan" required>
                            </div>
                        </div>
                    </div>

                    <!-- Darah Vena Details -->
                    <div id="darah-vena-details" class="specimen-box" style="display: none;">
                        <div class="specimen-title">Detail Pengambilan Darah Vena</div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="lokasi-pengambilan">Lokasi Pengambilan</label>
                                <select id="lokasi-pengambilan">
                                    <option value="">-- Pilih Lokasi --</option>
                                    <option value="antecubital">Antecubital (lipatan siku)</option>
                                    <option value="tangan">Tangan</option>
                                    <option value="kaki">Kaki</option>
                                    <option value="leher">Leher (CVP)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="jenis-tabung">Jenis Tabung/Container</label>
                                <select id="jenis-tabung">
                                    <option value="">-- Pilih Tabung --</option>
                                    <option value="gold-serum">Gold/Serum (SST)</option>
                                    <option value="purple-edta">Purple/EDTA</option>
                                    <option value="blue-citrate">Blue/Citrate</option>
                                    <option value="green-heparin">Green/Heparin</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Urin Details -->
                    <div id="urin-details" class="specimen-box" style="display: none;">
                        <div class="specimen-title">Detail Pengambilan Urin</div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="metode-urin">Metode Pengambilan</label>
                                <select id="metode-urin">
                                    <option value="">-- Pilih Metode --</option>
                                    <option value="midstream">Midstream (tengah aliran)</option>
                                    <option value="first-morning">First Morning (pagi pertama)</option>
                                    <option value="24-jam">24 Jam (24-hour)</option>
                                    <option value="kateter">Kateter</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Sputum Details -->
                    <div id="sputum-details" class="specimen-box" style="display: none;">
                        <div class="specimen-title">Detail Pengambilan Sputum</div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="karakteristik-sputum">Karakteristik Sputum</label>
                                <select id="karakteristik-sputum">
                                    <option value="">-- Pilih Karakteristik --</option>
                                    <option value="mukoid">Mukoid (jernih/putih)</option>
                                    <option value="purulen">Purulen (kuning/hijau)</option>
                                    <option value="berdarah">Berdarah (hemoptisis)</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Feses Details -->
                    <div id="feces-details" class="specimen-box" style="display: none;">
                        <div class="specimen-title">Detail Pengambilan Feses</div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="konsistensi-feces">Konsistensi Feses</label>
                                <select id="konsistensi-feces">
                                    <option value="">-- Pilih Konsistensi --</option>
                                    <option value="padat">Padat</option>
                                    <option value="lunak">Lunak</option>
                                    <option value="cair">Cair/Diare</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Cairan Details -->
                    <div id="cairan-details" class="specimen-box" style="display: none;">
                        <div class="specimen-title">Detail Cairan Tubuh</div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="jenis-cairan">Jenis Cairan Tubuh</label>
                                <select id="jenis-cairan">
                                    <option value="">-- Pilih Jenis --</option>
                                    <option value="cerebrospinal">CSF (Cairan Serebrospinal)</option>
                                    <option value="pleural">Pleural (Cairan Paru)</option>
                                    <option value="peritoneal">Peritoneal (Cairan Perut)</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Jaringan Details -->
                    <div id="jaringan-details" class="specimen-box" style="display: none;">
                        <div class="specimen-title">Detail Jaringan/Biopsi</div>
                        <div class="form-group">
                            <label for="ukuran-jaringan">Ukuran Jaringan</label>
                            <input type="text" id="ukuran-jaringan" placeholder="Ukuran jaringan">
                        </div>
                    </div>
                </div>

                <!-- Catatan -->
                <div class="form-section">
                    <h3><i class="fas fa-sticky-note"></i> Catatan Khusus</h3>
                    <div class="form-group">
                        <label for="catatan-lab">Catatan Tambahan</label>
                        <textarea id="catatan-lab" name="catatan-lab" placeholder="Catatan tambahan untuk laboratorium"></textarea>
                    </div>
                </div>

                <!-- Submit -->
                <div style="margin-top: 20px;">
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="goBack()">
                            <i class="fas fa-times"></i> Batal
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Simpan Permintaan Laboratorium
                        </button>
                    </div>
                </div>
            </form>
        </main>
    </div>

    <script>
        // Update specimen info visibility based on specimen type
        function updateSpecimenInfo() {
            const specimenType = document.getElementById('jenis-lab').value;
            const detailDivs = document.querySelectorAll('[id$="-details"]');
            
            detailDivs.forEach(div => {
                div.style.display = 'none';
            });

            if (specimenType === 'darah-vena' || specimenType === 'darah-kapiler') {
                document.getElementById('darah-vena-details').style.display = 'block';
            } else if (specimenType === 'urin') {
                document.getElementById('urin-details').style.display = 'block';
            } else if (specimenType === 'sputum') {
                document.getElementById('sputum-details').style.display = 'block';
            } else if (specimenType === 'feces') {
                document.getElementById('feces-details').style.display = 'block';
            } else if (specimenType === 'cairan-tubuh') {
                document.getElementById('cairan-details').style.display = 'block';
            } else if (specimenType === 'jaringan' || specimenType === 'biopsi') {
                document.getElementById('jaringan-details').style.display = 'block';
            }
        }

        function goBack() {
            window.history.back();
        }
    </script>
    <script src="js/role-manager.js"></script>
    <script src="js/script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            roleManager.requireLogin(['dokter', 'pmik', 'admin']);
            roleManager.updateNavbarProfile();
        });
    </script>
</body>
</html>

