<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Pasien - RUMAH SAKIT JAYA SEHAT</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* Sidebar Pasien */
        .sidebar-patient {
            width: 280px;
            background: linear-gradient(180deg, #1e3c72 0%, #2a5298 100%);
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            padding: 20px;
            color: white;
            overflow-y: auto;
            z-index: 100;
        }
        
        .sidebar-patient .logo {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .sidebar-patient .logo i {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #00d4ff;
        }
        
        .sidebar-patient .logo h2 {
            font-size: 1.1em;
            font-weight: 600;
            margin: 0;
        }
        
        .patient-menu {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .patient-menu li {
            margin-bottom: 5px;
        }
        
        .patient-menu a {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            color: rgba(255,255,255,0.9);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s;
        }
        
        .patient-menu a:hover {
            background: rgba(255,255,255,0.1);
            padding-left: 20px;
        }
        
        .patient-menu a.active {
            background: rgba(0,212,255,0.2);
            color: white;
            font-weight: 600;
        }
        
        .patient-menu a i {
            margin-right: 12px;
            width: 20px;
            text-align: center;
        }
        
        /* Main Content */
        .main-content-patient {
            margin-left: 280px;
            padding: 0;
            min-height: 100vh;
            background: #f5f7fa;
        }
        
        /* Welcome Section */
        .welcome-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
        }
        
        .welcome-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .patient-greeting h1 {
            font-size: 2em;
            margin: 0 0 10px 0;
        }
        
        .patient-greeting p {
            opacity: 0.9;
            font-size: 1.1em;
        }
        
        .patient-rm {
            background: rgba(255,255,255,0.2);
            padding: 15px 25px;
            border-radius: 8px;
            text-align: center;
        }
        
        .patient-rm .label {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        .patient-rm .value {
            font-size: 1.5em;
            font-weight: bold;
            margin-top: 5px;
        }
        
        /* Quick Stats */
        .quick-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-top: 30px;
        }
        
        .stat-card {
            background: rgba(255,255,255,0.15);
            padding: 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }
        
        .stat-card .icon {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .stat-card .number {
            font-size: 2em;
            font-weight: bold;
            margin: 5px 0;
        }
        
        .stat-card .label {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        /* Dashboard Content */
        .dashboard-content {
            padding: 30px 40px;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }
        
        .dashboard-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .card-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 1.5em;
        }
        
        .card-icon.blue {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .card-icon.green {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }
        
        .card-icon.orange {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
        
        .card-icon.purple {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }
        
        .card-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #333;
        }
        
        .card-content {
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .card-button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: #0066cc;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            text-decoration: none;
            font-size: 0.9em;
            transition: background 0.3s;
        }
        .card-action a:hover, .card-action button:hover {
            background: #0052a3;
        }
        .section-title {
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 3px solid #0066cc;
            padding-bottom: 10px;
        }
        .medical-records {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        .record-item {
            padding: 15px;
            border-left: 4px solid #0066cc;
            margin-bottom: 12px;
            background: #f8f9fa;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .record-info {
            flex: 1;
        }
        .record-date {
            color: #0066cc;
            font-weight: bold;
            font-size: 0.9em;
        }
        .record-type {
            font-weight: bold;
            color: #333;
            margin: 5px 0;
        }
        .record-detail {
            color: #666;
            font-size: 0.9em;
        }
        .record-action {
            display: flex;
            gap: 10px;
        }
        .btn-view, .btn-download {
            padding: 6px 12px;
            font-size: 0.85em;
            border-radius: 4px;
            cursor: pointer;
            border: none;
            transition: all 0.3s;
        }
        .btn-view {
            background: #0066cc;
            color: white;
        }
        .btn-view:hover {
            background: #0052a3;
        }
        .btn-download {
            background: #f0f0f0;
            color: #333;
        }
        .btn-download:hover {
            background: #e0e0e0;
        }
        .alert-banner {
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            color: #856404;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .alert-banner i {
            font-size: 1.3em;
            color: #ffc107;
        }
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
            background: #e8f5e9;
            color: #2e7d32;
        }
        .appointment-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        .appointment-date {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .appointment-doctor {
            font-size: 0.95em;
            opacity: 0.9;
        }
        .sidebar-patient {
            position: sticky;
            top: 20px;
        }
        @media (max-width: 768px) {
            .patient-header {
                flex-direction: column;
                text-align: center;
            }
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            .patient-meta {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar Navigation -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2><i class="fas fa-hospital"></i> RS JAYA SEHAT</h2>
        </div>
        <nav class="sidebar-nav">
            <a href="dashboard-pasien.html" class="nav-item active">
                <i class="fas fa-chart-line"></i> Dashboard Saya
            </a>
            <a href="identitas-pasien.html" class="nav-item">
                <i class="fas fa-user-circle"></i> Profil Saya
            </a>
            <a href="daftar-kunjungan.html" class="nav-item">
                <i class="fas fa-calendar-check"></i> Riwayat Kunjungan
            </a>
            <a href="hasil-laboratorium.html" class="nav-item">
                <i class="fas fa-flask"></i> Hasil Lab
            </a>
            <a href="diagnosis.html" class="nav-item">
                <i class="fas fa-stethoscope"></i> Diagnosis
            </a>
            <a href="index.html" class="nav-item">
                <i class="fas fa-home"></i> Halaman Utama
            </a>
        </nav>
        <div class="sidebar-footer">
            <button onclick="logout()" class="logout-btn">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Patient Dashboard Header -->
            <div class="patient-dashboard">
                <div class="patient-header">
                    <div class="patient-info">
                        <div class="patient-name"><i class="fas fa-user-circle"></i> Budi Santoso</div>
                        <div class="patient-meta">
                            <div class="meta-item">
                                <div class="meta-label">No RM</div>
                                <div class="meta-value">RM-2024-001</div>
                            </div>
                            <div class="meta-item">
                                <div class="meta-label">NIK</div>
                                <div class="meta-value">3273XXXXXXXXXX</div>
                            </div>
                            <div class="meta-item">
                                <div class="meta-label">Umur</div>
                                <div class="meta-value">45 Tahun</div>
                            </div>
                            <div class="meta-item">
                                <div class="meta-label">Jenis Kelamin</div>
                                <div class="meta-value">Laki-Laki</div>
                            </div>
                            <div class="meta-item">
                                <div class="meta-label">Darah</div>
                                <div class="meta-value">O+</div>
                            </div>
                            <div class="meta-item">
                                <div class="meta-label">Status Asuransi</div>
                                <div class="meta-value">BPJS Aktif</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Alert Banner -->
            <div class="alert-banner" id="alert-banner" style="display: none;">
                <i class="fas fa-exclamation-circle"></i>
                <div id="alert-message">Anda memiliki jadwal kontrol yang mendesak. Hubungi klinik untuk penjadwalan.</div>
            </div>

            <!-- Main Dashboard Grid -->
            <div>
                <!-- Medical Records Section -->
                <div class="section-title">
                    <i class="fas fa-folder-medical"></i> Riwayat Medis Terbaru
                </div>
                
                <div class="medical-records">
                    <!-- Latest Visit -->
                    <div class="record-item">
                        <div class="record-info">
                            <div class="record-date"><i class="fas fa-calendar-alt"></i> 15 Januari 2024</div>
                            <div class="record-type">Kunjungan ke Poli Umum</div>
                            <div class="record-detail">Keluhan: Demam dan batuk. Diagnosis: ISPA (Infeksi Saluran Pernapasan Akut)</div>
                            <span class="status-badge" style="margin-top: 8px;">Selesai</span>
                        </div>
                        <div class="record-action">
                            <button class="btn-view" onclick="showDetail('visit')"><i class="fas fa-eye"></i> Lihat</button>
                            <button class="btn-download" onclick="downloadDocument('visit')"><i class="fas fa-download"></i> Download</button>
                        </div>
                    </div>

                    <!-- Lab Results -->
                    <div class="record-item">
                        <div class="record-info">
                            <div class="record-date"><i class="fas fa-flask"></i> 10 Januari 2024</div>
                            <div class="record-type">Hasil Laboratorium</div>
                            <div class="record-detail">Pemeriksaan Darah Lengkap - Hasil Normal</div>
                            <span class="status-badge" style="margin-top: 8px;">Sudah Divalidasi</span>
                        </div>
                        <div class="record-action">
                            <button class="btn-view" onclick="showDetail('lab')"><i class="fas fa-eye"></i> Lihat</button>
                            <button class="btn-download" onclick="downloadDocument('lab')"><i class="fas fa-download"></i> Download</button>
                        </div>
                    </div>

                    <!-- Imaging -->
                    <div class="record-item">
                        <div class="record-info">
                            <div class="record-date"><i class="fas fa-image"></i> 5 Januari 2024</div>
                            <div class="record-type">Hasil Radiologi</div>
                            <div class="record-detail">Rontgen Dada - Tidak ada kelainan</div>
                            <span class="status-badge" style="margin-top: 8px;">Sudah Divalidasi</span>
                        </div>
                        <div class="record-action">
                            <button class="btn-view" onclick="showDetail('imaging')"><i class="fas fa-eye"></i> Lihat</button>
                            <button class="btn-download" onclick="downloadDocument('imaging')"><i class="fas fa-download"></i> Download</button>
                        </div>
                    </div>

                    <!-- Diagnosis -->
                    <div class="record-item">
                        <div class="record-info">
                            <div class="record-date"><i class="fas fa-stethoscope"></i> 15 Januari 2024</div>
                            <div class="record-type">Diagnosis Medis</div>
                            <div class="record-detail">ISPA dengan komplikasi ringan. ICD-10: J06.9</div>
                            <span class="status-badge" style="margin-top: 8px;">Dikonfirmasi</span>
                        </div>
                        <div class="record-action">
                            <button class="btn-view" onclick="showDetail('diagnosis')"><i class="fas fa-eye"></i> Lihat</button>
                            <button class="btn-download" onclick="downloadDocument('diagnosis')"><i class="fas fa-download"></i> Download</button>
                        </div>
                    </div>
                </div>

                <!-- Key Information Cards -->
                <div class="section-title">
                    <i class="fas fa-stethoscope"></i> Informasi Penting
                </div>
                <div class="dashboard-grid">
                    <!-- Current Medications -->
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-icon"><i class="fas fa-pills"></i></div>
                            <div class="card-title">Obat Saat Ini</div>
                        </div>
                        <div class="card-content">
                            <div style="margin-bottom: 8px;"><strong>Paracetamol</strong> - 500mg 3x sehari</div>
                            <div style="margin-bottom: 8px;"><strong>Amoksisilin</strong> - 500mg 3x sehari</div>
                            <div><strong>Vitamin C</strong> - 500mg 2x sehari</div>
                        </div>
                        <div class="card-action">
                            <button onclick="showDetail('medications')"><i class="fas fa-eye"></i> Lihat Detail</button>
                        </div>
                    </div>

                    <!-- Allergies & Warnings -->
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-icon" style="background: #fce4ec; color: #d81b60;"><i class="fas fa-exclamation"></i></div>
                            <div class="card-title">Alergi & Peringatan</div>
                        </div>
                        <div class="card-content">
                            <div style="margin-bottom: 8px;"><strong>Alergi Obat:</strong> Penisilin</div>
                            <div><strong>Kondisi Khusus:</strong> Hipertensi, Kolesterol Tinggi</div>
                        </div>
                        <div class="card-action">
                            <button onclick="showDetail('allergies')"><i class="fas fa-edit"></i> Edit</button>
                        </div>
                    </div>

                    <!-- Doctor Information -->
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-icon" style="background: #e3f2fd; color: #1976d2;"><i class="fas fa-user-md"></i></div>
                            <div class="card-title">Dokter Utama</div>
                        </div>
                        <div class="card-content">
                            <div style="margin-bottom: 8px;"><strong>Dr. Siti Nurhaliza, Sp.PD</strong></div>
                            <div style="margin-bottom: 8px;">Spesialis Penyakit Dalam</div>
                            <div>Jam Praktik: Senin, Rabu, Jumat (14:00-17:00)</div>
                        </div>
                        <div class="card-action">
                            <button onclick="showDetail('doctor')"><i class="fas fa-phone"></i> Hubungi</button>
                        </div>
                    </div>

                    <!-- Health Insurance -->
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-icon" style="background: #f3e5f5; color: #7b1fa2;"><i class="fas fa-shield-alt"></i></div>
                            <div class="card-title">Asuransi Kesehatan</div>
                        </div>
                        <div class="card-content">
                            <div style="margin-bottom: 8px;"><strong>BPJS Kesehatan</strong></div>
                            <div style="margin-bottom: 8px;">No. Peserta: 000123456789</div>
                            <div>Status: AKTIF</div>
                        </div>
                        <div class="card-action">
                            <button onclick="showDetail('insurance')"><i class="fas fa-eye"></i> Lihat Detail</button>
                        </div>
                    </div>

                    <!-- Emergency Contact -->
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-icon" style="background: #ffebee; color: #c62828;"><i class="fas fa-phone-alt"></i></div>
                            <div class="card-title">Kontak Darurat</div>
                        </div>
                        <div class="card-content">
                            <div style="margin-bottom: 8px;"><strong>Istri (Sinta Rahayu)</strong></div>
                            <div style="margin-bottom: 8px;">0812-3456-7890</div>
                            <div><strong>Rumah Sakit Hotline:</strong> (0274) 555-1234</div>
                        </div>
                        <div class="card-action">
                            <button onclick="showDetail('emergency')"><i class="fas fa-edit"></i> Edit</button>
                        </div>
                    </div>

                    <!-- Upcoming Appointments -->
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-icon" style="background: #e0f2f1; color: #00695c;"><i class="fas fa-calendar-check"></i></div>
                            <div class="card-title">Jadwal Kontrol</div>
                        </div>
                        <div class="card-content">
                            <div class="appointment-card">
                                <div class="appointment-date">22 Januari 2024 14:00</div>
                                <div class="appointment-doctor">Dr. Siti Nurhaliza - Poli Umum</div>
                            </div>
                            <div class="appointment-card">
                                <div class="appointment-date">29 Januari 2024 10:00</div>
                                <div class="appointment-doctor">Kontrol Laboratorium</div>
                            </div>
                        </div>
                        <div class="card-action">
                            <button onclick="showDetail('appointments')"><i class="fas fa-calendar-plus"></i> Jadwalkan</button>
                        </div>
                    </div>
                </div>

                <!-- Health Recommendations -->
                <div class="section-title">
                    <i class="fas fa-lightbulb"></i> Rekomendasi Kesehatan
                </div>
                
                <div class="medical-records">
                    <div class="record-item">
                        <div class="record-info">
                            <div class="record-type"><i class="fas fa-heartbeat"></i> Istirahat Cukup</div>
                            <div class="record-detail">Pastikan istirahat minimal 7-8 jam per hari untuk pemulihan optimal</div>
                        </div>
                    </div>
                    <div class="record-item">
                        <div class="record-info">
                            <div class="record-type"><i class="fas fa-utensils"></i> Nutrisi Seimbang</div>
                            <div class="record-detail">Konsumsi makanan bergizi tinggi dengan banyak sayur dan buah-buahan</div>
                        </div>
                    </div>
                    <div class="record-item">
                        <div class="record-info">
                            <div class="record-type"><i class="fas fa-running"></i> Aktivitas Fisik</div>
                            <div class="record-detail">Lakukan jalan kaki ringan 30 menit setiap hari</div>
                        </div>
                    </div>
                    <div class="record-item">
                        <div class="record-info">
                            <div class="record-type"><i class="fas fa-check"></i> Minum Obat Teratur</div>
                            <div class="record-detail">Jangan lupa minum obat sesuai jadwal yang telah ditentukan</div>
                        </div>
                    </div>
                    <div class="record-item">
                        <div class="record-info">
                            <div class="record-type"><i class="fas fa-phone-alt"></i> Hubungi Jika Gejala Memburuk</div>
                            <div class="record-detail">Segera hubungi dokter atau pergi ke RS jika terjadi perburukan gejala</div>
                        </div>
                    </div>
                </div>

                <!-- Footer Actions -->
                <div style="text-align: center; margin: 40px 0;">
                    <button onclick="downloadMedicalSummary()" class="btn btn-primary" style="margin-right: 10px;">
                        <i class="fas fa-download"></i> Download Ringkasan Medis
                    </button>
                    <button onclick="shareWithDoctor()" class="btn btn-secondary">
                        <i class="fas fa-share-alt"></i> Bagikan Riwayat Medis
                    </button>
                </div>
            </div>
        </div>
    </main>

    <script src="js/script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Show alert if there are urgent follow-ups
            const hasUrgentFollowUp = true; // This would come from backend
            if (hasUrgentFollowUp) {
                document.getElementById('alert-banner').style.display = 'flex';
            }
        });

        function showDetail(type) {
            const messages = {
                'visit': 'Detail Kunjungan: Demam dan batuk sejak 3 hari yang lalu...',
                'lab': 'Hasil Lab: Darah Lengkap - Semua nilai dalam batas normal',
                'imaging': 'Rontgen Dada: Tidak ada infiltrat, paru-paru jernih',
                'diagnosis': 'Diagnosis: ISPA (J06.9) - Infeksi Saluran Pernapasan Akut',
                'medications': 'Obat yang sedang diminum dan durasi penggunaan',
                'allergies': 'Alergi Penisilin - Hindari obat golongan beta-laktam',
                'doctor': 'Hubungi Dr. Siti Nurhaliza di nomor klinik',
                'insurance': 'Status BPJS Aktif - Jaminan Kesehatan Terjamin',
                'emergency': 'Kontak darurat untuk keperluan mendesak',
                'appointments': 'Jadwalkan kontrol berikutnya'
            };
            
            alert('ðŸ“‹ ' + (messages[type] || 'Detail informasi'));
        }

        function downloadDocument(type) {
            alert('âœ… Dokumen ' + type + ' sedang diunduh...');
            console.log('Download:', type);
        }

        function downloadMedicalSummary() {
            alert('ðŸ“„ Ringkasan medis sedang diunduh dalam format PDF');
            console.log('Downloading medical summary');
        }

        function shareWithDoctor() {
            alert('ðŸ“¤ Riwayat medis akan dibagikan ke dokter pilihan');
            console.log('Sharing medical history');
        }
    </script>
    <script src="js/role-manager.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            roleManager.requireLogin(['pasien']);
            roleManager.updateNavbarProfile();
        });
    </script>
</body>
</html>
